(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{4677:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/todo",function(){return s(4146)}])},5677:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var s in e)Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}(e,{noSSR:function(){return a},default:function(){return o}});let n=s(8754),r=(s(7294),n._(s(8976)));function i(t){return{default:(null==t?void 0:t.default)||t}}function a(t,e){return delete e.webpack,delete e.modules,t(e)}function o(t,e){let s=r.default,n={loading:t=>{let{error:e,isLoading:s,pastDelay:n}=t;return null}};t instanceof Promise?n.loader=()=>t:"function"==typeof t?n.loader=t:"object"==typeof t&&(n={...n,...t}),n={...n,...e};let o=n.loader;return(n.loadableGenerated&&(n={...n,...n.loadableGenerated},delete n.loadableGenerated),"boolean"!=typeof n.ssr||n.ssr)?s({...n,loader:()=>null!=o?o().then(i):Promise.resolve(i(()=>null))}):(delete n.webpack,delete n.modules,a(s,n))}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},2254:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"LoadableContext",{enumerable:!0,get:function(){return i}});let n=s(8754),r=n._(s(7294)),i=r.default.createContext(null)},8976:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return p}});let n=s(8754),r=n._(s(7294)),i=s(2254),a=[],o=[],l=!1;function u(t){let e=t(),s={loading:!0,loaded:null,error:null};return s.promise=e.then(t=>(s.loading=!1,s.loaded=t,t)).catch(t=>{throw s.loading=!1,s.error=t,t}),s}class c{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:t,_opts:e}=this;t.loading&&("number"==typeof e.delay&&(0===e.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},e.delay)),"number"==typeof e.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},e.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(t=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(t){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...t},this._callbacks.forEach(t=>t())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(t){return this._callbacks.add(t),()=>{this._callbacks.delete(t)}}constructor(t,e){this._loadFn=t,this._opts=e,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function d(t){return function(t,e){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},e),n=null;function a(){if(!n){let e=new c(t,s);n={getCurrentValue:e.getCurrentValue.bind(e),subscribe:e.subscribe.bind(e),retry:e.retry.bind(e),promise:e.promise.bind(e)}}return n.promise()}if(!l){let t=s.webpack?s.webpack():s.modules;t&&o.push(e=>{for(let s of t)if(e.includes(s))return a()})}function u(t,e){!function(){a();let t=r.default.useContext(i.LoadableContext);t&&Array.isArray(s.modules)&&s.modules.forEach(e=>{t(e)})}();let o=r.default.useSyncExternalStore(n.subscribe,n.getCurrentValue,n.getCurrentValue);return r.default.useImperativeHandle(e,()=>({retry:n.retry}),[]),r.default.useMemo(()=>{var e;return o.loading||o.error?r.default.createElement(s.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:n.retry}):o.loaded?r.default.createElement((e=o.loaded)&&e.default?e.default:e,t):null},[t,o])}return u.preload=()=>a(),u.displayName="LoadableComponent",r.default.forwardRef(u)}(u,t)}function h(t,e){let s=[];for(;t.length;){let n=t.pop();s.push(n(e))}return Promise.all(s).then(()=>{if(t.length)return h(t,e)})}d.preloadAll=()=>new Promise((t,e)=>{h(a).then(t,e)}),d.preloadReady=t=>(void 0===t&&(t=[]),new Promise(e=>{let s=()=>(l=!0,e());h(o,t).then(s,s)})),window.__NEXT_PRELOADREADY=d.preloadReady;let p=d},5699:function(t,e,s){"use strict";s.d(e,{b:function(){return n}});let n="https://64927c19428c3d2035d02a9d.mockapi.io/api"},1902:function(t,e,s){"use strict";var n=s(5699),r=s(6154);let i=r.Z.create({baseURL:"".concat(n.b),headers:{"Content-type":"application/json"}}),a={key:"55ee5df9f691b5fa1c36dcd225e43fd3",base:"https://api.openweathermap.org/data/2.5/"},o="".concat(a.base,"weather?q=").concat("Seoul","&appid=").concat(a.key),l=async()=>{let t=await i.get("/todos");return t.data},u=async()=>{let t=await i.get(o);return t.data},c=async t=>{let e=await i.get("/todos/".concat(t));return e.data},d=async t=>{let{title:e}=t,s=await i.post("/todos",{title:e});return s.data},h=async t=>{let e=await i.delete("/todos/".concat(t));return e.data},p=async(t,e)=>{let{title:s,completed:n}=e,r=await i.put("/todos/".concat(t),{title:s,completed:n});return r.data};e.Z={create:d,getTodoItem:c,get:l,getWeather:u,deleteById:h,update:p}},4146:function(t,e,s){"use strict";s.r(e),s.d(e,{__N_SSG:function(){return O},default:function(){return R}});var n=s(5893),r=s(5152),i=s.n(r),a=s(1902),o=s(5945),l=s(8228),u=s(1664),c=s.n(u),d=s(7294),h=s(8271),p=s.n(h),f=t=>{let{data:e}=t;console.log("itemdata",e.id,e.completed);let s=(0,o.NL)(),[r,i]=(0,d.useState)(e.id),[u,h]=(0,d.useState)(e.title),[f,m]=(0,d.useState)(e.completed),[_,b]=(0,d.useState)(!1),[y,v]=(0,d.useState)(""),{isLoading:g,mutate:x}=(0,l.D)(async()=>await a.Z.deleteById(r),{onSuccess:t=>{s.invalidateQueries(["todos"]),console.log("res",t)},onError:t=>{}}),{isLoading:w,mutate:j}=(0,l.D)(async()=>await a.Z.update(e.id,{title:y,completed:f}),{onSuccess:t=>{console.log("res",t),s.invalidateQueries(["todos"])},onError:t=>{}}),O=(t,e)=>{if(v(t.target.value),m(!e),r)try{j()}catch(t){}};return(0,n.jsxs)("li",{className:p().item,children:[e.id,".",(0,n.jsxs)("div",{className:p().input_wrap,children:[(0,n.jsx)("input",{type:"text",defaultValue:u,className:"".concat(p().input," ").concat(p().is_edit),onChange:t=>O(t),onBlur:()=>b(!1),onFocus:()=>b(!0)}),(0,n.jsx)("input",{type:"checkbox",name:"",id:"",checked:e.completed,onChange:t=>{O(t,e.completed)}})]}),(0,n.jsxs)("div",{className:p().btn_wrap,children:[(0,n.jsx)(c(),{href:"/todo/".concat(e.id),children:"링크 이동"}),(0,n.jsx)("button",{onClick:function(){if(console.log("cc",r),r)try{x()}catch(t){}},children:"삭제"})]})]})},m=s(7848),_=s(2725),b=s.n(_),y=()=>{let[t,e]=(0,d.useState)(0),[s,r]=(0,d.useState)([]),{data:i}=(0,m.a)({queryKey:["todos"],queryFn:a.Z.get,keepPreviousData:!0,refetchOnWindowFocus:!0});return(0,d.useEffect)(()=>{switch(t){case 0:r(i);break;case 1:r(null==i?void 0:i.filter(t=>!0===t.completed));break;case 2:r(null==i?void 0:i.filter(t=>!1===t.completed))}},[t,i]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("nav",{children:[(0,n.jsx)("div",{onClick:()=>e(0),children:"전체"}),(0,n.jsx)("div",{onClick:()=>e(1),children:"완료"}),(0,n.jsx)("div",{onClick:()=>e(2),children:"미완료"})]}),(0,n.jsx)("ul",{className:b().posts,children:s&&s.map((t,e)=>(0,n.jsx)(f,{data:t},e))})]})},v=s(5013),g=s.n(v),x=s(9008),w=s.n(x);let j=i()(()=>s.e(799).then(s.bind(s,799)),{loadableGenerated:{webpack:()=>[799]}});var O=!0,R=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w(),{children:[(0,n.jsx)("title",{children:"투두 리스트 페이지 샘플"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("div",{className:g().main_page,children:[(0,n.jsx)(j,{}),(0,n.jsx)(y,{})]})]})},8271:function(t){t.exports={item:"todoitem_item__taPxI",input:"todoitem_input__kjU0Y",btn_wrap:"todoitem_btn_wrap__YsO9O"}},2725:function(t){t.exports={posts:"todolist_posts__bFnzp"}},5013:function(t){t.exports={main_page:"main_main_page__bDZR4"}},5152:function(t,e,s){t.exports=s(5677)},8228:function(t,e,s){"use strict";s.d(e,{D:function(){return h}});var n=s(7294),r=s(464),i=s(2161),a=s(9886),o=s(81),l=s(3989);class u extends l.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let s=this.options;this.options=this.client.defaultMutationOptions(t),(0,i.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,a.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){o.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,s,n,r,i,a,o,l;t.onSuccess?(null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(r=this.mutateOptions).onSettled)||n.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(l=this.mutateOptions).onSettled)||o.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(({listener:t})=>{t(this.currentResult)})})}}var c=s(5945),d=s(4798);function h(t,e,s){let a=(0,i.lV)(t,e,s),l=(0,c.NL)({context:a.context}),[h]=n.useState(()=>new u(l,a));n.useEffect(()=>{h.setOptions(a)},[h,a]);let f=(0,r.$)(n.useCallback(t=>h.subscribe(o.V.batchCalls(t)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),m=n.useCallback((t,e)=>{h.mutate(t,e).catch(p)},[h]);if(f.error&&(0,d.L)(h.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:m,mutateAsync:f.mutate}}function p(){}}},function(t){t.O(0,[169,996,774,888,179],function(){return t(t.s=4677)}),_N_E=t.O()}]);